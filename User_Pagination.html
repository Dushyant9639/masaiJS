<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Paginated Users</title>
  <style>
    body { font-family: Arial; padding: 20px; }
    .user-card { 
      border: 1px solid #ddd; 
      padding: 10px; 
      margin: 10px 0; 
      border-radius: 8px; 
      background-color: #f9f9f9;
    }
    .pagination { 
      display: flex; 
      gap: 8px; 
      margin-top: 20px; 
      flex-wrap: wrap; 
    }
    .pagination button { 
      padding: 8px 12px; 
      cursor: pointer; 
      border-radius: 5px;
      border: 1px solid #ccc;
      background-color: white;
    }
    .pagination button:hover {
      background-color: #eee;
    }
  </style>
</head>
<body>
  <h2>User List (Paginated)</h2>

  <!-- Container where user cards will be added -->
  <div id="user-container"></div>

  <!-- Container where pagination buttons will be added -->
  <div class="pagination" id="pagination-container"></div>

  <!-- JavaScript file link -->
  <script src="script.js"></script>
</body>
</html>
<script>
  // Get reference to user display area and pagination button container
const userContainer = document.getElementById('user-container');
const paginationContainer = document.getElementById('pagination-container');

// Constants for pagination
const USERS_PER_PAGE = 6;
const TOTAL_USERS = 10; // Known count from JSONPlaceholder
const TOTAL_PAGES = Math.ceil(TOTAL_USERS / USERS_PER_PAGE);

/**
 * Fetches users from the API for the given page number
 * @param {number} page - The current page number
 */
async function fetchUsers(page) {
  try {
    // Fetch users with pagination query parameters
    const res = await fetch(`https://jsonplaceholder.typicode.com/users?_page=${page}&_limit=${USERS_PER_PAGE}`);
    
    // If response not OK, throw an error
    if (!res.ok) throw new Error('Failed to fetch data from API');
    
    // Parse the JSON response
    const users = await res.json();

    // Display fetched users in the DOM
    displayUsers(users);

  } catch (error) {
    // Show error message to user if fetch fails
    userContainer.innerHTML = `<p style="color: red;">${error.message}</p>`;
  }
}

/**
 * Renders the users into the DOM as cards
 * @param {Array} users - Array of user objects
 */
function displayUsers(users) {
  // Clear previous user data
  userContainer.innerHTML = '';

  // Loop through each user and create a card
  users.forEach(user => {
    const div = document.createElement('div');
    div.className = 'user-card';
    div.innerHTML = `
      <strong>${user.name}</strong><br>
      Username: ${user.username}<br>
      Email: ${user.email}<br>
      City: ${user.address.city}
    `;
    userContainer.appendChild(div);
  });
}

/**
 * Creates and adds pagination buttons to the DOM
 */
function createPagination() {
  // Loop to create a button for each page
  for (let i = 1; i <= TOTAL_PAGES; i++) {
    const btn = document.createElement('button');
    btn.textContent = i;

    // Add click event to each button to fetch and display that page's users
    btn.addEventListener('click', () => fetchUsers(i));

    paginationContainer.appendChild(btn);
  }
}

/**
 * Initializes the app on page load
 * - Fetches the first page
 * - Creates pagination buttons
 */
window.onload = () => {
  fetchUsers(1);        // Load page 1 initially
  createPagination();   // Create pagination controls
};

</script>